
<div>

<span>

<span>

<p>
配点 : $625$点
</p>

<div>

<section>

### **問題文**

<p>
長さ $N$の整数列 $A=(A _ 1,A _ 2,\ldots,A _ N)$が与えられます。
</p>

<p>
$Q$個の操作を順に処理してください。
操作は次の $3$種類のいずれかです。
</p>

<ul>

<li>
タイプ $1$の操作は整数の $3$つ組 $(l,r,x)$で表され、$i=l,l+1,\ldots,r$に対して、$A _ i$を $\max\lbrace A _ i,x\rbrace$で置き換えることに対応する。
</li>

<li>
タイプ $2$の操作は整数 $i$で表され、$i$回目の操作を取り消すことに対応する（ただし、$i$回目の操作はタイプ $1$の操作であり、これまでに取り消されていないことが保証される）。数列 $A$は、最初の状態からはじめてこれまでのタイプ $1$の操作のうち
<strong>
取り消されていない
</strong>
操作がすべて行われた状態になる。
</li>

<li>
タイプ $3$の操作は整数 $i$で表され、現在の $A _ i$の値を出力することに対応する。
</li>

</ul>

</section>

</div>

<div>

<section>

### **制約**

<ul>

<li>
$1\leq N\leq2\times10 ^ 5$
</li>

<li>
$1\leq A _ i\leq10 ^ 9\ (1\leq i\leq N)$
</li>

<li>
$1\leq Q\leq2\times10 ^ 5$
</li>

<li>
タイプ $1$の操作において、$1\leq l\leq r\leq N$かつ $1\leq x\leq10 ^ 9$
</li>

<li>
タイプ $2$の操作において、$i$はそれ以前に与えられた操作の回数以下かつ $1\leq i$
</li>

<li>
タイプ $2$の操作において、$i$番目の操作はタイプ $1$の操作
</li>

<li>
タイプ $2$の操作における $i$は重複しない
</li>

<li>
タイプ $3$の操作において、$1\leq i\leq N$
</li>

<li>
入力はすべて整数
</li>

</ul>

</section>

</div>

---

<div>

<div>

<section>

### **入力**

<p>
入力は以下の形式で標準入力から与えられる。
</p>

<div>

$N$$A _ 1$$A _ 2$$\ldots$$A _ N$$Q$$\operatorname{query} _ 1$$\operatorname{query} _ 2$$\vdots$$\operatorname{query} _ Q$
</div>

<p>
ただし、$\operatorname{query} _ k\ (1\leq k\leq Q)$は $k$回目の操作を表し、$k$回目の操作のタイプによってそれぞれ次のような入力が与えられる。
</p>

<p>
タイプ $1$の操作の場合
</p>

<div>

$1$$l$$r$$x$
</div>

<p>
が入力され、$k$回目の操作が $(l,r,x)$で表されるタイプ $1$の操作であることを意味する。
</p>

<p>
タイプ $2$の操作の場合
</p>

<div>

$2$$i$
</div>

<p>
が入力され、$k$回目の操作が $i$で表されるタイプ $2$の操作であることを意味する。
</p>

<p>
タイプ $3$の操作の場合
</p>

<div>

$3$$i$
</div>

<p>
が入力され、$k$回目の操作が $i$で表されるタイプ $3$の操作であることを意味する。
</p>

</section>

</div>

<div>

<section>

### **出力**

<p>
与えられるタイプ $3$の操作の個数を $q$個とし、$q$行出力せよ。
$i$行目 $(1\leq i\leq q)$にはタイプ $3$の操作のうち $i$番目に入力されたもので出力すべき値を出力せよ。
</p>

</section>

</div>

</div>

---

<div>

<section>

### **入力例 1**

<div>

6
2 7 1 8 2 8
15
3 1
3 3
3 4
1 1 5 4
3 1
3 3
3 4
1 3 6 9
3 1
3 3
3 4
2 4
3 1
3 3
3 4

</div>

</section>

</div>

<div>

<section>

### **出力例 1**

<div>

2
1
8
4
4
8
4
9
9
2
9
9

</div>

<p>
はじめ、数列 $A$は $(2,7,1,8,2,8)$です。
</p>

<p>
$1,2,3$回目の操作では $A _ 1,A _ 3,A _ 4$の値である $2,1,8$をそれぞれ出力してください。
</p>

<p>
$4$回目の操作では $A _ 1,A _ 2,A _ 3,A _ 4,A _ 5$の値を $\max\lbrace A _ i,4\rbrace$で置き換えます。
この操作の直後、$A$は $(4,7,4,8,4,8)$となります。
</p>

<p>
$5,6,7$回目の操作ではこの時点での $A _ 1,A _ 3,A _ 4$の値である $4,4,8$をそれぞれ出力してください。
</p>

<p>
$8$回目の操作では $A _ 3,A _ 4,A _ 5,A _ 6$の値を $\max\lbrace A _ i,9\rbrace$で置き換えます。
この操作の直後、$A$は $(4,7,9,9,9,9)$となります。
</p>

<p>
$9,10,11$回目の操作ではこの時点での $A _ 1,A _ 3,A _ 4$の値である $4,9,9$をそれぞれ出力してください。
</p>

<p>
$12$回目の操作では $4$回目の操作を取り消します。
この操作の直後、$A$は $(2,7,9,9,9,9)$となります。
</p>

<p>
$13,14,15$回目の操作ではこの時点での $A _ 1,A _ 3,A _ 4$の値である $2,9,9$をそれぞれ出力してください。
</p>

</section>

</div>

---

<div>

<section>

### **入力例 2**

<div>

24
721 78 541 256 970 478 370 467 344 542 43 166 619 17 592 222 983 729 338 747 62 452 815 838
35
3 10
3 8
3 8
3 13
3 9
1 1 17 251
3 3
3 19
3 13
3 22
3 1
3 15
3 18
3 10
3 15
1 16 19 883
1 8 23 212
3 5
3 13
2 6
3 15
1 5 18 914
2 17
3 20
1 23 23 56
3 13
2 25
3 13
3 13
3 10
2 16
1 17 22 308
3 19
3 17
3 7

</div>

</section>

</div>

<div>

<section>

### **出力例 2**

<div>

542
467
467
619
344
541
338
619
452
721
592
729
542
592
970
619
592
747
914
914
914
914
338
983
914

</div>

</section>

</div>

</span>

</span>

</div>
